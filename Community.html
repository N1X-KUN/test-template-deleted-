<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0f0f16" />
  <title>Community Page - Rivals Nexus</title>
  <link rel="icon" href="Images/Rival.png" type="image/x-icon" />
  <link rel="stylesheet" href="Rivals.css" />
  <link rel="stylesheet" href="Community.css" />
</head>
<body>
  <!-- Page Loader -->
  <div id="page-loader" class="page-loader">
    <div class="loader-content">
      <div class="loader-logo">
        <img src="Images/Icon Logo.svg" alt="Rivals" />
      </div>
      <div class="loader-text">
        RIVALING<span class="loader-dots"></span>
      </div>
      <div class="loader-progress">
        <div class="loader-progress-bar"></div>
      </div>
    </div>
  </div>
  
  <a class="sr-only" href="#main">Skip to content</a>
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="Rivals.html" aria-label="Rivals Home">
        <img src="Images/Icon Logo.svg" alt="Brand" style="height:40px;width:auto" />
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="Patch.html">Patch Notes</a>
        <a href="Hero.html">Rival Cards</a>
        <a href="Community.html" aria-current="page">Spawn Chats</a>
        <a href="#" aria-label="Log in" title="Log in" class="login-icon" id="login-btn">
          <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        </a>
        <a class="cta" data-magnetic href="Videos/RivalsLauncher.mp4" download="MarvelRivals_Gameplay.mp4"><span class="shine" aria-hidden="true"></span>Play Now</a>
      </nav>
      <button class="hamburger" aria-controls="mobile-drawer" aria-expanded="false" aria-label="Open menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18"/></svg>
      </button>
    </div>
    <div class="drawer" id="mobile-drawer" hidden>
      <div class="drawer-panel" role="dialog" aria-label="Mobile Menu">
        <a href="Patch.html">Patch Notes</a>
        <a href="Hero.html">Rival Cards</a>
        <a href="Community.html" aria-current="page">Spawn Chats</a>
        <a href="#" class="btn" id="mobile-login-btn">Log in</a>
        <a class="cta" data-magnetic href="Videos/RivalsLauncher.mp4" download="MarvelRivals_Gameplay.mp4"><span class="shine" aria-hidden="true"></span>Play Now</a>
      </div>
    </div>
  </header>

  <!-- 
    # MAIN COMMUNITY PAGE CONTENT
    This is the social media/community page where users can post, comment, like, and follow.
    The page has a feed on the left and a sidebar on the right. All posts are stored in
    localStorage which caused a major issue like when users posted videos, the data URLs were
    so large that they exceeded the browser's storage quota (5-10MB limit apperantly). Had to add
    file size warnings and a function to clear old posts to free up space or multiple attachments.
  -->
  <main id="main" class="community-main">
    <!-- Background image that appears behind the top section only -->
    <div class="community-top-bg" aria-hidden="true"></div>
    <div class="community-container">
      <!-- 
        # COMMUNITY FEED SECTION
        This is where all the posts are displayed. The feed has three tabs: Discussions,
        Popular, and Following. Posts are dynamically generated from localStorage data.
      -->
      <div class="community-feed">
        <!-- Content Layer -->
        <div class="community-feed-content">
        <!-- 
          # NAVIGATION TABS
          Three tabs to filter posts: Discussions (all posts), Popular (most liked),
          and Following (posts from users you follow). The Following tab shows a message
          for guest users telling them to log in to follow users. 
        -->
        <div class="community-nav-tabs">
          <button class="community-tab active" data-tab="discussions">Discussions</button>
          <button class="community-tab" data-tab="popular">Popular</button>
          <button class="community-tab" data-tab="following">Following</button>
        </div>

        <!-- 
          # CREATE POST SECTION
          This is where users create new posts. Can add text, one image, or one video
          (not both, and only one attachment total).The media preview shows immediately 
          when a file is selected, and there's an X button to remove it. 
        -->
        <div class="create-post-card">
          <div class="create-post-header">
            <div class="user-avatar-small">
              <img src="Images/Rival.png" alt="Your avatar" id="current-user-avatar" />
            </div>
            <input type="text" class="create-post-input" placeholder="Share your thoughts, strategies, or highlights..." id="create-post-input" />
          </div>
          <div class="create-post-actions">
            <button class="create-post-btn" type="button" data-type="image">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
              Image
            </button>
            <button class="create-post-btn" type="button" data-type="video">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="23 7 16 12 23 17 23 7"></polygon>
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
              </svg>
              Video
            </button>
            <button class="create-post-submit" type="button" id="submit-post-btn" disabled>Post</button>
          </div>
          <div class="create-post-media-preview" id="media-preview" hidden></div>
          <input type="file" id="media-upload-input" accept="image/*,video/*" hidden />
        </div>

        <!-- 
          # POSTS FEED
          This is where all posts are rendered. Posts are loaded from localStorage
          and displayed dynamically. Each post can be liked, commented on, shared,
          edited or deleted (if you're the author or an admin). The feed updates in real-time 
          when new posts are created or when posts are edited/deleted.
          Biggest pain were the seeded posts not showing up but by reseting the post in the console, 
          using reloadSeededPosts() reseted the posts and showed them again.
        -->
        <div class="posts-feed" id="posts-feed">
          <!-- Posts will be dynamically generated here -->
        </div>
        </div>
      </div>

      <!-- 
        # COMMUNITY SIDEBAR
        The sidebar shows user profile info, quick navigation links, and admin tools
        (if the user is an admin). The profile widget switches between guest and logged-in
        states.
    -->
      <aside class="community-sidebar">
        <!-- 
          # PROFILE DETAILS WIDGET
          Shows different content based on whether the user is logged in or a guest.
          For guests, it shows a sign-up prompt. For logged-in users, it shows their
          avatar, bio, favorite character, rank, winrate, and account creation date.
          The stats are pulled from the user's account data stored in localStorage.
        -->
        <div class="sidebar-widget profile-widget" id="profile-widget">
          <!-- Guest State -->
          <div class="profile-guest-state" id="profile-guest-state">
            <div class="profile-avatar-large">
              <img src="Images/Rival.png" alt="Guest" />
            </div>
            <h3 class="profile-username">Guest</h3>
            <p class="profile-bio">Sign up now to create your account and unlock all features!</p>
            <button class="profile-signup-btn" id="profile-signup-trigger">Sign Up Now</button>
          </div>
          
          <!-- Logged In State -->
          <div class="profile-logged-state" id="profile-logged-state" style="display: none;">
            <div class="profile-header">
              <div class="profile-avatar-large">
                <img src="Images/Rival.png" alt="User avatar" id="profile-avatar-img" />
              </div>
              <h3 class="profile-username" id="profile-username-text">Username</h3>
              <p class="profile-bio" id="profile-bio-text">No bio set</p>
            </div>
            <div class="profile-stats">
              <div class="profile-stat-item">
                <span class="profile-stat-icon">‚≠ê</span>
                <div class="profile-stat-content">
                  <span class="profile-stat-label">Favorite Character</span>
                  <span class="profile-stat-value" id="profile-favorite-char">Not set</span>
                </div>
              </div>
              <div class="profile-stat-item">
                <span class="profile-stat-icon">üèÜ</span>
                <div class="profile-stat-content">
                  <span class="profile-stat-label">Current Rank</span>
                  <span class="profile-stat-value" id="profile-rank">Unranked</span>
                </div>
              </div>
              <div class="profile-stat-item">
                <span class="profile-stat-icon">üìä</span>
                <div class="profile-stat-content">
                  <span class="profile-stat-label">Winrate</span>
                  <span class="profile-stat-value" id="profile-winrate">0%</span>
                </div>
              </div>
              <div class="profile-stat-item">
                <span class="profile-stat-icon">üìÖ</span>
                <div class="profile-stat-content">
                  <span class="profile-stat-label">Account Created</span>
                  <span class="profile-stat-value" id="profile-created-date">-</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 
          # QUICK NAVIGATION WIDGET
          Links to other sections of the website.
        -->
        <div class="sidebar-widget navigation-widget">
          <div class="widget-header">
            <h3>Quick Navigation</h3>
          </div>
          <div class="nav-links-grid">
            <a href="#" class="nav-link-item" id="nav-hot-list" target="_blank" rel="noopener noreferrer">
              <div class="nav-link-icon">üî•</div>
              <span>Hero Hot List</span>
            </a>
            <a href="#" class="nav-link-item" id="nav-team-up" target="_blank" rel="noopener noreferrer">
              <div class="nav-link-icon">üë•</div>
              <span>Team Up</span>
            </a>
            <a href="#" class="nav-link-item" id="nav-media" target="_blank" rel="noopener noreferrer">
              <div class="nav-link-icon">üì∏</div>
              <span>Media</span>
            </a>
          </div>
        </div>

        <!-- 
          # ADMIN TOOLS WIDGET
          Only visible to admin users. Contains a button to view all accounts.
          This was tricky to implement because we had to fetch user data from the
          backend API, count posts and comments from localStorage, and match user IDs
          between MongoDB (_id) and localStorage (userId). The ID matching was a pain
          because they're stored differently, so I had to add multiple fallback checks
          to match users correctly.
        -->
        <div class="sidebar-widget admin-accounts-widget" id="admin-accounts-widget" style="display: none;">
          <div class="widget-header">
            <h3>Admin Tools</h3>
          </div>
          <button class="admin-view-accounts-btn" id="admin-view-accounts-btn" type="button">
            <div class="nav-link-icon">üë•</div>
            <span>View All Accounts</span>
          </button>
        </div>
      </aside>

      <!-- 
        # ADMIN ACCOUNTS MODAL
        This modal shows all registered accounts in a table with their creation date,
        post count, comment count, and ban status. Admins can ban/unban users from here,
        (did this instead of deleting users because I think its better this way).
        The modal was stuck open initially because the CSS wasn't hiding it by default.
      -->
      <div class="admin-accounts-modal" id="admin-accounts-modal" hidden>
        <div class="admin-accounts-modal-overlay" data-modal-close></div>
        <div class="admin-accounts-modal-content">
          <div class="admin-accounts-modal-header">
            <h2>All Accounts</h2>
            <button class="admin-accounts-modal-close" data-modal-close>&times;</button>
          </div>
          <div class="admin-accounts-modal-body">
            <div class="admin-accounts-table-wrapper">
              <table class="admin-accounts-table">
                <thead>
                  <tr>
                    <th>Username</th>
                    <th>Created</th>
                    <th>Posts</th>
                    <th>Comments</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="admin-accounts-table-body">
                  <!-- Accounts will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>


  <!-- Social Media Icons Sidebar -->
  <div class="social-sidebar">
    <a href="#" class="social-icon" aria-label="Facebook">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
      </svg>
    </a>
    <a href="#" class="social-icon" aria-label="Instagram">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
      </svg>
    </a>
    <a href="#" class="social-icon" aria-label="Twitter/X">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
    </a>
    <a href="#" class="social-icon" aria-label="YouTube">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
      </svg>
    </a>
    <a href="#" class="social-icon" aria-label="Discord">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 18.2 18.2 0 0 1-2.582-1.22.077.077 0 0 1-.008-.128 10.9 10.9 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 18.5 18.5 0 0 1-2.584 1.22.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
      </svg>
    </a>
  </div>

  <!-- 
    # POST DETAIL MODAL
    This modal opens when users click on a post to see full details, comments, etc.
    The modal shows the complete post content, all comments, and allows users to
    interact with the post (like, comment, share).
  -->
  <div class="post-modal" id="post-modal" hidden>
    <div class="post-modal-overlay" data-modal-close></div>
    <div class="post-modal-content">
      <button class="post-modal-close" data-modal-close>&times;</button>
      <div class="post-modal-body" id="post-modal-body">
        <!-- Post content will be loaded here -->
      </div>
    </div>
  </div>

  <footer>
    <div class="container foot-min">
      <div>
        <div class="foot-links">
          <a href="https://protocol.unisdk.easebar.com/release/latest_v487.html">Terms & Conditions</a><span class="sep">|</span>
          <a href="https://protocol.unisdk.easebar.com/release/latest_v475.html">Privacy Policy</a><span class="sep">|</span>
          <a href="https://www.marvelrivals.com/guide/server">FAQ</a><span class="sep">|</span>
          <a href="https://act.neteasegames.com/activity/3sSWzy">Perks</a><span class="sep">|</span>
          <a href="https://www.marvelrivals.com/creator_program.html">PartnerHub</a>
        </div>
        <div class="foot-meta">Copyright ¬© 2026 Rivals . Yippie New Year!</div>
        <div class="foot-badges">
          <img src="Images/NetEase.png" alt="Compliance badge" class="badge-img" />
          <img src="Images/Marvel Logo.png" alt="Age rating" class="badge-img" />
        </div>
      </div>
      <div class="foot-right">
        <div class="foot-logo" aria-label="Company logo">
          <img src="Images/TeenEsp.png" alt="Company logo" />
        </div>
      </div>
    </div>
  </footer>

  <!-- Login/Sign-in Popup -->
  <div id="login-popup" class="login-popup" hidden>
    <div class="login-overlay"></div>
    <div class="login-modal">
      <button class="login-close" aria-label="Close login">&times;</button>
      
      <!-- Split Screen Layout -->
      <div class="login-modal-content">
        <!-- Left Section: Registration -->
        <div class="login-section registration-section">
          <div class="login-section-header">
            <div class="login-logo-container">
              <img src="Images/Rival.png" alt="Marvel Rivals" class="login-logo-image" />
              <div class="login-logo-text">
                <span class="login-logo-brand">Account</span>
                <span class="login-logo-name">Marvel Rivals</span>
              </div>
            </div>
          </div>

          <h2 class="login-section-title">Registration</h2>

          <form id="popup-registrationForm" class="login-auth-form">
            <div class="login-form-group">
              <input type="email" id="popup-reg-email" placeholder="E-mail" required>
            </div>
            <div class="login-form-group">
              <input type="text" id="popup-reg-nickname" placeholder="Nickname" required>
            </div>
            <div class="login-form-group login-password-group">
              <input type="password" id="popup-reg-password" placeholder="Password" required>
              <button type="button" class="password-toggle" id="popup-reg-password-toggle" aria-label="Toggle password visibility">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                  <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </button>
            </div>
            <div class="login-form-group login-password-group">
              <input type="password" id="popup-reg-password-repeat" placeholder="Repeat the password" required>
              <button type="button" class="password-toggle" id="popup-reg-password-repeat-toggle" aria-label="Toggle password visibility">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                  <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </button>
            </div>
            <div class="login-form-group login-captcha-group">
              <input type="text" id="popup-reg-captcha" placeholder="Enter the code" required>
              <div class="login-captcha-display">
                <span id="popup-captcha-text">694</span>
                <span class="login-captcha-lang">/en</span>
                <button type="button" class="login-captcha-refresh" id="popup-refreshCaptcha" aria-label="Refresh captcha">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                    <path d="M21 3v5h-5"/>
                    <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                    <path d="M3 21v-5h5"/>
                  </svg>
                </button>
              </div>
            </div>
            <div class="login-form-group login-checkbox-group">
              <label class="login-checkbox-label">
                <input type="checkbox" id="popup-reg-terms" required>
                <span>I accept <a href="#" class="login-link">Terms of Service</a> and <a href="#" class="login-link">Privacy Policy</a>.</span>
              </label>
            </div>
            <button type="submit" class="login-submit-btn" id="popup-reg-submit-btn" disabled>CREATE AN ACCOUNT</button>
          </form>

        </div>

        <!-- Right Section: Login -->
        <div class="login-section login-right-section">
          <video class="login-right-section__video" autoplay muted loop playsinline aria-hidden="true">
            <source src="Videos/LunaDanceVid.mp4" type="video/mp4">
          </video>
          <div class="login-right-content">
            <!-- Guest login status display -->
            <div id="guest-status" class="guest-status" style="display: none;">
              <p class="guest-status-text">Currently logged in as <strong>Guest</strong></p>
              <button class="guest-logout-btn" id="guest-logout-btn">Logout Guest</button>
            </div>
            
            <p class="login-description" id="login-description">Already played Rival? Save your progress!</p>
            <button class="login-social-login-btn" id="popup-guestLogin">
              <div class="login-social-icon">üë§</div>
              <span>Continue As Guest</span>
            </button>
            <div class="login-expandable-section">
              <button class="login-expand-btn" id="popup-expandLink">
                <span>Played before but haven't linked an email?</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </button>
              <div class="login-expand-content" id="popup-expandContent" hidden>
                <form id="popup-loginForm" class="login-auth-form">
                  <div class="login-form-group">
                    <input type="email" id="popup-login-email" placeholder="E-mail" required>
                  </div>
                  <div class="login-form-group login-password-group">
                    <input type="password" id="popup-login-password" placeholder="Password" required>
                    <button type="button" class="password-toggle" id="popup-login-password-toggle" aria-label="Toggle password visibility">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                        <line x1="1" y1="1" x2="23" y2="23"></line>
                      </svg>
                    </button>
                  </div>
                  <button type="submit" class="login-submit-btn">LOG IN</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ensure modals are hidden on page load -->
  <script>
    // Ensure post modal is hidden on page load
    document.addEventListener('DOMContentLoaded', function() {
      const postModal = document.getElementById('post-modal');
      if (postModal) {
        postModal.setAttribute('hidden', '');
      }
    });
  </script>
  
  <script defer src="Rivals.js"></script>
  <!-- 
    # COMMUNITY.JS - MAIN COMMUNITY PAGE LOGIC
    This is the sum of what Community.js handles:
    - Post creation, editing, deletion (with media support)
    - Comment system with admin deletion
    - Like/follow functionality
    - Admin features (ban users, delete comments, view all accounts)
    - localStorage management for posts (with quota handling)
    - Media handling (images and videos)
    - Tab filtering (Discussions, Popular, Following)
    - Seeded posts initialization and reloading
    
    The file is huge (almost 2000 lines) because it has to handle so many features.
    The localStorage quota issue was a major problem as it had to add file size checks,
    warnings, and a clearOldPosts() function to help users manage storage when it gets full.
    Also had to fix issues with posts containing only videos not appearing, and ID matching
    between MongoDB (_id) and localStorage (userId) for the admin panel.
  -->
  <script defer src="Community.js"></script>
  
  <!-- React and ReactDOM for Music Player (load first) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- YouTube IFrame Player API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  
  <!-- Music Player Styles and Script -->
  <link rel="stylesheet" href="music-player.css" />
  <script defer src="music-player.js"></script>
</body>
</html>
